<!DOCTYPE html>
<html lang="az">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>BSU Chat</title>
    <link rel="stylesheet" href="/styles.css">
</head>
<body>
    <!-- Landing Page -->
    <div id="landing-page" class="page active">
        <div class="landing-content">
            <div class="tab-buttons">
                <button class="tab-btn active" data-tab="login">Giri≈ü</button>
                <button class="tab-btn" data-tab="register">Qeydiyyat</button>
                <button class="tab-btn" data-tab="admin">Admin Paneli</button>
            </div>
            
            <!-- Login Form -->
            <div id="login-tab" class="tab-content active">
                <div class="auth-card">
                    <div class="auth-icon">
                        <svg width="60" height="60" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 2L3 7V11C3 16.55 6.84 21.74 12 23C17.16 21.74 21 16.55 21 11V7L12 2Z" fill="#FF4C4C"/>
                        </svg>
                    </div>
                    <h2>Admin Paneli</h2>
                    <form id="login-form">
                        <input type="email" name="email" placeholder="email@example.com" required>
                        <input type="password" name="password" placeholder="≈ûifr…ô" required>
                        <button type="submit" class="btn-primary">Daxil ol</button>
                        <button type="button" class="btn-secondary" onclick="resetForm()">√áƒ±xƒ±≈ü</button>
                    </form>
                </div>
            </div>
            
            <!-- Register Form -->
            <div id="register-tab" class="tab-content">
                <div class="auth-card">
                    <div class="auth-icon">
                        <svg width="60" height="60" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 3L1 9L12 15L21 10.09V17H23V9M5 13.18V17.18L12 21L19 17.18V13.18L12 17L5 13.18Z" fill="#4285F4"/>
                        </svg>
                    </div>
                    <h2>BSU Chat</h2>
                    <p class="subtitle">Qeyd ol</p>
                    <form id="register-form">
                        <input type="text" name="fullName" placeholder="Ad v…ô Soyad" required>
                        
                        <div class="email-input-wrapper">
                            <input type="text" name="emailPrefix" placeholder="email" required>
                            <span class="email-suffix">@bsu.edu.az</span>
                        </div>
                        
                        <div class="phone-input-wrapper">
                            <span class="phone-prefix">+994</span>
                            <input type="tel" name="phone" placeholder="501234567" maxlength="9" pattern="[0-9]{9}" required>
                        </div>
                        
                        <select name="faculty" required>
                            <option value="">Fak√ºlt…ô se√ßin</option>
                            <option value="Mexanika-riyaziyyat fak√ºlt…ôsi">Mexanika-riyaziyyat fak√ºlt…ôsi</option>
                            <option value="T…ôtbiqi riyaziyyat v…ô kibernetika fak√ºlt…ôsi">T…ôtbiqi riyaziyyat v…ô kibernetika fak√ºlt…ôsi</option>
                            <option value="Fizika fak√ºlt…ôsi">Fizika fak√ºlt…ôsi</option>
                            <option value="Kimya fak√ºlt…ôsi">Kimya fak√ºlt…ôsi</option>
                            <option value="Biologiya fak√ºlt…ôsi">Biologiya fak√ºlt…ôsi</option>
                            <option value="Ekologiya v…ô torpaq≈ü√ºnaslƒ±q fak√ºlt…ôsi">Ekologiya v…ô torpaq≈ü√ºnaslƒ±q fak√ºlt…ôsi</option>
                            <option value="Coƒürafiya fak√ºlt…ôsi">Coƒürafiya fak√ºlt…ôsi</option>
                            <option value="Geologiya fak√ºlt…ôsi">Geologiya fak√ºlt…ôsi</option>
                            <option value="Filologiya fak√ºlt…ôsi">Filologiya fak√ºlt…ôsi</option>
                            <option value="Tarix fak√ºlt…ôsi">Tarix fak√ºlt…ôsi</option>
                            <option value="Beyn…ôlxalq m√ºnasib…ôtl…ôr v…ô iqtisadiyyat fak√ºlt…ôsi">Beyn…ôlxalq m√ºnasib…ôtl…ôr v…ô iqtisadiyyat fak√ºlt…ôsi</option>
                            <option value="H√ºquq fak√ºlt…ôsi">H√ºquq fak√ºlt…ôsi</option>
                            <option value="Jurnalistika fak√ºlt…ôsi">Jurnalistika fak√ºlt…ôsi</option>
                            <option value="ƒ∞nformasiya v…ô s…ôn…ôd menecmenti fak√ºlt…ôsi">ƒ∞nformasiya v…ô s…ôn…ôd menecmenti fak√ºlt…ôsi</option>
                            <option value="≈û…ôrq≈ü√ºnaslƒ±q fak√ºlt…ôsi">≈û…ôrq≈ü√ºnaslƒ±q fak√ºlt…ôsi</option>
                            <option value="Sosial elml…ôr v…ô psixologiya fak√ºlt…ôsi">Sosial elml…ôr v…ô psixologiya fak√ºlt…ôsi</option>
                        </select>
                        
                        <select name="degree" required>
                            <option value="">D…ôr…ôc…ô se√ßin</option>
                            <option value="Bakalavr">Bakalavr</option>
                            <option value="Magistr">Magistr</option>
                            <option value="Doktorantura">Doktorantura</option>
                        </select>
                        
                        <select name="course" required>
                            <option value="">Kurs se√ßin</option>
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5</option>
                            <option value="6">6</option>
                        </select>
                        
                        <input type="password" name="password" placeholder="≈ûifr…ô" required>
                        
                        <button type="submit" class="btn-primary">N√∂vb…ôti</button>
                        <button type="button" class="btn-secondary">Assalamu aleykum, Tanƒ±≈ülƒ±qlara xo≈ü g…ôlmisiniz</button>
                    </form>
                </div>
            </div>
            
            <!-- Admin Login Form -->
            <div id="admin-tab" class="tab-content">
                <div class="auth-card">
                    <div class="auth-icon">
                        <svg width="60" height="60" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 2L3 7V11C3 16.55 6.84 21.74 12 23C17.16 21.74 21 16.55 21 11V7L12 2Z" fill="#FF4C4C"/>
                        </svg>
                    </div>
                    <h2>Admin Paneli</h2>
                    <form id="admin-login-form">
                        <input type="text" name="username" placeholder="ƒ∞stifad…ô√ßi adƒ±" required>
                        <input type="password" name="password" placeholder="≈ûifr…ô" required>
                        <button type="submit" class="btn-primary">Daxil ol</button>
                        <button type="button" class="btn-secondary" onclick="resetForm()">√áƒ±xƒ±≈ü</button>
                    </form>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Verification Page -->
    <div id="verification-page" class="page">
        <div class="verification-content">
            <div class="auth-card">
                <h2>Doƒürulama</h2>
                <p class="subtitle">3 sualdan minimum 2-n…ô doƒüru cavab verin</p>
                <form id="verification-form">
                    <div id="verification-questions"></div>
                    <button type="submit" class="btn-primary">Doƒürula</button>
                </form>
            </div>
        </div>
    </div>
    
    <!-- Faculty Selection Page -->
    <div id="faculty-page" class="page">
        <div class="faculty-header">
            <h2>BSU Chat</h2>
            <p>Bakƒ± D√∂vl…ôt Universiteti</p>
            <div class="header-actions">
                <button onclick="showRules()" class="icon-btn">üìã</button>
                <button onclick="showProfile()" class="icon-btn">üë§</button>
                <button onclick="logout()" class="icon-btn">üö™</button>
            </div>
        </div>
        <div class="daily-topic" id="daily-topic"></div>
        <div class="faculty-grid" id="faculty-grid"></div>
    </div>
    
    <!-- Chat Page -->
    <div id="chat-page" class="page">
        <div class="chat-header">
            <button onclick="backToFacultyList()" class="back-btn">‚Üê</button>
            <h3 id="chat-title"></h3>
            <div class="header-actions">
                <button onclick="showRules()" class="icon-btn">üìã</button>
                <button onclick="showProfile()" class="icon-btn">üë§</button>
            </div>
        </div>
        <div class="daily-topic" id="chat-daily-topic"></div>
        <div class="messages-container" id="messages-container"></div>
        <div class="message-input-container">
            <input type="text" id="message-input" placeholder="Mesaj yazƒ±n...">
            <button onclick="sendMessage()" class="send-btn">üì§</button>
        </div>
    </div>
    
    <!-- Profile Page -->
    <div id="profile-page" class="page">
        <div class="chat-header">
            <button onclick="closeProfile()" class="back-btn">‚Üê</button>
            <h3>Profil</h3>
        </div>
        <div class="profile-content">
            <div class="profile-picture-container">
                <img id="profile-picture" src="/default-avatar.png" alt="Profile">
                <button onclick="uploadProfilePicture()" class="upload-btn">≈û…ôkil Y√ºkl…ô</button>
                <input type="file" id="profile-picture-input" accept="image/*" style="display: none;">
            </div>
            <form id="profile-form">
                <input type="text" name="fullName" id="profile-fullname" placeholder="Ad v…ô Soyad" required>
                <select name="faculty" id="profile-faculty" required>
                    <option value="">Fak√ºlt…ô se√ßin</option>
                    <option value="Mexanika-riyaziyyat fak√ºlt…ôsi">Mexanika-riyaziyyat fak√ºlt…ôsi</option>
                    <option value="T…ôtbiqi riyaziyyat v…ô kibernetika fak√ºlt…ôsi">T…ôtbiqi riyaziyyat v…ô kibernetika fak√ºlt…ôsi</option>
                    <option value="Fizika fak√ºlt…ôsi">Fizika fak√ºlt…ôsi</option>
                    <option value="Kimya fak√ºlt…ôsi">Kimya fak√ºlt…ôsi</option>
                    <option value="Biologiya fak√ºlt…ôsi">Biologiya fak√ºlt…ôsi</option>
                    <option value="Ekologiya v…ô torpaq≈ü√ºnaslƒ±q fak√ºlt…ôsi">Ekologiya v…ô torpaq≈ü√ºnaslƒ±q fak√ºlt…ôsi</option>
                    <option value="Coƒürafiya fak√ºlt…ôsi">Coƒürafiya fak√ºlt…ôsi</option>
                    <option value="Geologiya fak√ºlt…ôsi">Geologiya fak√ºlt…ôsi</option>
                    <option value="Filologiya fak√ºlt…ôsi">Filologiya fak√ºlt…ôsi</option>
                    <option value="Tarix fak√ºlt…ôsi">Tarix fak√ºlt…ôsi</option>
                    <option value="Beyn…ôlxalq m√ºnasib…ôtl…ôr v…ô iqtisadiyyat fak√ºlt…ôsi">Beyn…ôlxalq m√ºnasib…ôtl…ôr v…ô iqtisadiyyat fak√ºlt…ôsi</option>
                    <option value="H√ºquq fak√ºlt…ôsi">H√ºquq fak√ºlt…ôsi</option>
                    <option value="Jurnalistika fak√ºlt…ôsi">Jurnalistika fak√ºlt…ôsi</option>
                    <option value="ƒ∞nformasiya v…ô s…ôn…ôd menecmenti fak√ºlt…ôsi">ƒ∞nformasiya v…ô s…ôn…ôd menecmenti fak√ºlt…ôsi</option>
                    <option value="≈û…ôrq≈ü√ºnaslƒ±q fak√ºlt…ôsi">≈û…ôrq≈ü√ºnaslƒ±q fak√ºlt…ôsi</option>
                    <option value="Sosial elml…ôr v…ô psixologiya fak√ºlt…ôsi">Sosial elml…ôr v…ô psixologiya fak√ºlt…ôsi</option>
                </select>
                <select name="degree" id="profile-degree" required>
                    <option value="">D…ôr…ôc…ô se√ßin</option>
                    <option value="Bakalavr">Bakalavr</option>
                    <option value="Magistr">Magistr</option>
                    <option value="Doktorantura">Doktorantura</option>
                </select>
                <select name="course" id="profile-course" required>
                    <option value="">Kurs se√ßin</option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                    <option value="6">6</option>
                </select>
                <button type="submit" class="btn-primary">Yenil…ô</button>
            </form>
        </div>
    </div>
    
    <!-- Rules Modal -->
    <div id="rules-modal" class="modal">
        <div class="modal-content">
            <button onclick="closeRules()" class="close-btn">√ó</button>
            <h2>Qaydalar</h2>
            <div id="rules-content"></div>
        </div>
    </div>
    
    <!-- User Menu Modal -->
    <div id="user-menu-modal" class="modal">
        <div class="modal-content">
            <button onclick="closeUserMenu()" class="close-btn">√ó</button>
            <div class="user-menu-profile">
                <img id="menu-user-avatar" src="/default-avatar.png" alt="Avatar">
                <h3 id="menu-user-name"></h3>
                <p id="menu-user-info"></p>
            </div>
            <div class="user-menu-actions">
                <button onclick="startPrivateChat()" class="menu-btn blue">üí¨ ≈û…ôxsi mesaj</button>
                <button onclick="blockUser()" class="menu-btn orange">üö´ ∆èng…ôll…ô</button>
                <button onclick="reportUser()" class="menu-btn red">üö© ≈ûikay…ôt et</button>
                <button onclick="closeUserMenu()" class="menu-btn gray">√áƒ±xƒ±≈ü</button>
            </div>
        </div>
    </div>
    
    <!-- Admin Panel -->
    <div id="admin-page" class="page">
        <div class="admin-header">
            <h2>Admin Paneli</h2>
            <button onclick="logoutAdmin()" class="icon-btn">üö™ √áƒ±xƒ±≈ü</button>
        </div>
        <div class="admin-content">
            <div class="admin-menu">
                <button class="admin-menu-btn active" onclick="showAdminSection('statistics')">
                    <span class="icon">üìä</span>
                    <span>Statistika v…ô ƒ∞stifad…ô√ßil…ôr</span>
                    <span class="description">B√ºt√ºn istifad…ô√ßil…ôrin siyahƒ±sƒ± v…ô statistikalarƒ±</span>
                </button>
                <button class="admin-menu-btn" onclick="showAdminSection('filter')">
                    <span class="icon">üîª</span>
                    <span>Filtr sistemi</span>
                    <span class="description">S√∂zl…ôri filtrd…ôn ke√ßirin</span>
                </button>
                <button class="admin-menu-btn" onclick="showAdminSection('qaydalar')">
                    <span class="icon">üìã</span>
                    <span>Qaydalar</span>
                    <span class="description">Sayt qaydasƒ±nƒ± g√∂nd…ôrin v…ô redakt…ô edin</span>
                </button>
                <button class="admin-menu-btn" onclick="showAdminSection('topic')">
                    <span class="icon">‚≠ê</span>
                    <span>G√ºnd…ôm M√ºzakir…ôsi</span>
                    <span class="description">G√ºnd…ôm m√∂vzusunu t…ôyin edin</span>
                </button>
                <button class="admin-menu-btn" onclick="showAdminSection('reports')">
                    <span class="icon">üë•</span>
                    <span>≈ûikay…ôt Edil…ônl…ôr</span>
                    <span class="description">≈ûikay…ôt edil…ôn hesablar</span>
                </button>
                <button class="admin-menu-btn" onclick="showAdminSection('subadmins')" id="subadmin-menu" style="display: none;">
                    <span class="icon">üë§</span>
                    <span>Alt Adminl…ôr</span>
                    <span class="description">Alt admin yaratma v…ô idar…ôetm…ô</span>
                </button>
            </div>
            
            <div id="admin-statistics" class="admin-section active">
                <h3>Statistika</h3>
                <div class="stats-grid">
                    <div class="stat-card">
                        <h4>√úmumi ƒ∞stifad…ô√ßi</h4>
                        <p id="total-users">0</p>
                    </div>
                    <div class="stat-card">
                        <h4>Aktiv ƒ∞stifad…ô√ßi</h4>
                        <p id="active-users">0</p>
                    </div>
                </div>
                <h3>B√ºt√ºn ƒ∞stifad…ô√ßil…ôr</h3>
                <div id="users-list" class="users-table"></div>
            </div>
            
            <div id="admin-filter" class="admin-section">
                <h3>Filtr Sistemi</h3>
                <textarea id="filter-words" placeholder="H…ôr s…ôtird…ô bir s√∂z daxil edin" rows="10"></textarea>
                <button onclick="saveFilterWords()" class="btn-primary">Yadda saxla</button>
            </div>
            
            <div id="admin-qaydalar" class="admin-section">
                <h3>Qaydalar</h3>
                <textarea id="rules-text" placeholder="Qaydalarƒ± buraya yazƒ±n" rows="10"></textarea>
                <button onclick="saveRules()" class="btn-primary">Yadda saxla</button>
            </div>
            
            <div id="admin-topic" class="admin-section">
                <h3>G√ºnd…ôm M√∂vzusu</h3>
                <input type="text" id="daily-topic-input" placeholder="G√ºn√ºn m√∂vzusunu daxil edin">
                <button onclick="saveDailyTopic()" class="btn-primary">Yadda saxla</button>
            </div>
            
            <div id="admin-reports" class="admin-section">
                <h3>≈ûikay…ôt Edil…ôn Hesablar (16+ ≈üikay…ôt)</h3>
                <div id="reported-users-list" class="users-table"></div>
            </div>
            
            <div id="admin-subadmins" class="admin-section">
                <h3>Alt Admin Yarat</h3>
                <form id="create-subadmin-form">
                    <input type="text" name="username" placeholder="ƒ∞stifad…ô√ßi adƒ±" required>
                    <input type="password" name="password" placeholder="≈ûifr…ô" required>
                    <button type="submit" class="btn-primary">Yarat</button>
                </form>
                <h3>Alt Adminl…ôr</h3>
                <div id="subadmins-list"></div>
            </div>
        </div>
    </div>

    <script src="https://cdn.socket.io/4.5.4/socket.io.min.js"></script>
    <script src="/app.js"></script>
</body>
</html>
